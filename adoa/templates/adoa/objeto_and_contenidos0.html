{% extends "base.html" %}
{% load i18n %}
{% load crispy_forms_tags %}
{% load get_name %}
{% load staticfiles %}
{% load debug_tags %}
{% block scripts %}
  <script type="text/javascript" src="{% static 'js/objeto_aprendizaje.js' %}"></script>
{% endblock %}
{% block content %}
<h1>Objeto y contenidos</h1>
<form action="{% url 'adoa:new'%}" method="post">

{{ form.titulo|as_crispy_field }}
{{ form.patron|as_crispy_field }}
<br>
<a href="{% url 'adoa:patrones' %}">Que patron elegir? </a>
<br>
{{ form.descripcion|as_crispy_field }}


{% for formset in inlines %}
{% csrf_token %}
  {% with formset.model|to_class_name|lower as model_name %}
  <input class={{model_name}}-amount type=number value={{formset|length}} hidden>
    <h1>{{ model_name|title }}{% if model_name == 'actividad' %}e{% endif %}s</h1>
    <div class={{model_name}}-formset>
      {{formset}}
    </div>
    {% if model_name == 'contenido' %}
    <a class=add-contenido href="javascript:void(0)">Agregar</a>
    {% endif %}
    {% if model_name == 'actividad' %}
    <a class=add-actividad href="javascript:void(0)">Agregar</a>
    <div class=actividad-template></div>
    {% endif %}
  {% endwith %}
{% endfor %}
<p class=no-patron href="javascript:void(0)">Por favor, seleccione un patron para continuar.</p>
<input class=send-form type="submit" value="Submit" />
</form>
{% endblock %}
